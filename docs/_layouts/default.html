<!DOCTYPE html>
<html lang="{{ site.lang | default: 'en-US' }}">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  {% seo %}
  <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  
  <!-- Enhanced meta tags for better SEO -->
  <meta name="description" content="{{ page.description | default: site.description | default: site.github.project_tagline }}">
  <meta name="keywords" content="Euler cluster, Docker, Singularity, HPC, ETH Zurich, Robotics Systems Lab, RSL">
  <meta name="author" content="Robotics Systems Lab, ETH Zurich">
  
  <!-- Open Graph meta tags -->
  <meta property="og:title" content="{{ page.title | default: site.title }}">
  <meta property="og:description" content="{{ page.description | default: site.description }}">
  <meta property="og:type" content="website">
  
  <title>{% if page.title %}{{ page.title }} | {% endif %}{{ site.title | default: site.github.repository_name }}</title>
</head>

<body>
  <div class="page-wrap">
    <!-- Site Header -->
    <div class="site-header">
      <div class="main-content-wrap">
        <div class="site-header-inner">
          {% assign site_title = site.title | default: site.github.repository_name %}
          <a href="{{ '/' | absolute_url }}" class="site-title">{{ site_title }}</a>
          
          {% if site.search_enabled != false %}
          <div class="search">
            <div class="search-input-wrap">
              <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search {{ site.title }}" aria-label="Search {{ site.title }}" autocomplete="off">
              <div class="search-results" id="search-results"></div>
            </div>
          </div>
          {% endif %}
          
          {% if site.aux_links %}
          <nav aria-label="Auxiliary Navigation" class="aux-nav">
            <ul class="aux-nav-list">
              {% for link in site.aux_links %}
                <li class="aux-nav-list-item">
                  {% for entry in link %}
                    <a href="{{ entry[1] }}" class="aux-nav-list-link"
                       {% if site.aux_links_new_tab %}target="_blank" rel="noopener noreferrer"{% endif %}>
                      {{ entry[0] }}
                    </a>
                  {% endfor %}
                </li>
              {% endfor %}
            </ul>
          </nav>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- Main Content Area -->
    <div class="site-content">
      {% if site.nav_enabled != false %}
      <!-- Sidebar Navigation -->
      <div class="side-bar">
        <div class="site-nav" role="navigation" aria-label="Main Navigation">
          {% include nav.html %}
        </div>
        <footer class="site-footer-content">
          <p class="text-small text-grey-dk-000 mb-0">{{ site.footer_content }}</p>
        </footer>
      </div>
      {% endif %}

      <!-- Main Content -->
      <div class="main-content-wrap">
        <div class="main-content{% unless site.nav_enabled == false %} js-main-content{% endunless %}" tabindex="0">
          <div class="page-header js-page-header">
            {% if site.search_enabled != false %}
            <div class="search-results js-search-results"></div>
            {% endif %}
            {% if page.parent %}
              {%- for node in pages_list -%}
                {%- if node.parent == nil -%}
                  {%- if page.parent == node.title or page.grand_parent == node.title -%}
                    {%- assign first_level_url = node.url | absolute_url -%}
                  {%- endif -%}
                  {%- if node.has_children -%}
                    {%- assign children_list = pages_list | where: "parent", node.title -%}
                    {%- for child in children_list -%}
                      {%- if page.url == child.url or page.parent == child.title -%}
                        {%- assign second_level_url = child.url | absolute_url -%}
                      {%- endif -%}
                    {%- endfor -%}
                  {%- endif -%}
                {%- endif -%}
              {%- endfor -%}
              <nav aria-label="Breadcrumb" class="breadcrumb-nav">
                <ol class="breadcrumb-nav-list">
                  {% if page.grand_parent %}
                    <li class="breadcrumb-nav-list-item"><a href="{{ first_level_url }}">{{ page.grand_parent }}</a></li>
                    <li class="breadcrumb-nav-list-item"><a href="{{ second_level_url }}">{{ page.parent }}</a></li>
                  {% else %}
                    <li class="breadcrumb-nav-list-item"><a href="{{ first_level_url }}">{{ page.parent }}</a></li>
                  {% endif %}
                  <li class="breadcrumb-nav-list-item"><span>{{ page.title }}</span></li>
                </ol>
              </nav>
            {% endif %}
          </div>
          
          <div class="page">
            {% unless page.url == "/" %}
              {% if page.parent %}
                {%- for node in pages_list -%}
                  {%- if node.parent == nil -%}
                    {%- if page.parent == node.title or page.grand_parent == node.title -%}
                      {%- assign first_level_url = node.url | absolute_url -%}
                    {%- endif -%}
                    {%- if node.has_children -%}
                      {%- assign children_list = pages_list | where: "parent", node.title -%}
                      {%- for child in children_list -%}
                        {%- if page.url == child.url or page.parent == child.title -%}
                          {%- assign second_level_url = child.url | absolute_url -%}
                        {%- endif -%}
                      {%- endfor -%}
                    {%- endif -%}
                  {%- endif -%}
                {%- endfor -%}
              {% endif %}
            {% endunless %}

            <div id="main-content" class="page-content" role="main">
              {% if site.heading_anchors != false %}
                {% include vendor/anchor_headings.html html=content beforeHeading="true" anchorBody="<svg viewBox=\"0 0 16 16\" aria-hidden=\"true\"><use xlink:href=\"#svg-link\"></use></svg>" anchorClass="anchor-heading" anchorAttrs="aria-labelledby=\"%html_id%\"" %}
              {% else %}
                {{ content }}
              {% endif %}

              {% if page.has_children == true and page.has_toc != false %}
                <hr>
                <h2 class="text-delta">Table of contents</h2>
                <ul>
                  {%- assign children_list = pages_list | where: "parent", page.title | where: "grand_parent", page.parent -%}
                  {% for child in children_list %}
                    <li>
                      <a href="{{ child.url | absolute_url }}">{{ child.title }}</a>{% if child.summary %} - {{ child.summary }}{% endif %}
                    </li>
                  {% endfor %}
                </ul>
              {% endif %}

              {% if site.footer_content != nil or site.last_edit_timestamp or site.gh_edit_link %}
                <hr>
                <footer>
                  {% if site.back_to_top %}
                    <p><a href="#top" id="back-to-top">{{ site.back_to_top_text | default: "back to top" }}</a></p>
                  {% endif %}

                  {% if site.footer_content != nil %}
                    <p class="text-small text-grey-dk-000 mb-0">{{ site.footer_content }}</p>
                  {% endif %}

                  {% if site.last_edit_timestamp or site.gh_edit_link %}
                    <div class="d-flex mt-2">
                      {% if site.last_edit_timestamp and site.last_edit_time_format and page.last_modified_date %}
                        <p class="text-small text-grey-dk-000 mb-0 mr-2">
                          Page last modified: <span class="d-inline-block">{{ page.last_modified_date | date: site.last_edit_time_format }}</span>.
                        </p>
                      {% endif %}
                      {% if
                        site.gh_edit_link and
                        site.gh_edit_link_text and
                        site.gh_edit_repository and
                        site.gh_edit_branch and
                        site.gh_edit_view_mode
                      %}
                        <p class="text-small text-grey-dk-000 mb-0">
                          <a href="{{ site.gh_edit_repository }}/{{ site.gh_edit_view_mode }}/{{ site.gh_edit_branch }}{% if site.gh_edit_source %}/{{ site.gh_edit_source }}{% endif %}/{{ page.path }}" id="edit-this-page">{{ site.gh_edit_link_text }}</a>
                        </p>
                      {% endif %}
                    </div>
                  {% endif %}
                </footer>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- SVG Icons -->
  <div class="d-none">
    {% include icons/icons.html %}
  </div>

  <!-- Scripts -->
  {% if site.search_enabled != false %}
  <script type="text/javascript" src="{{ '/assets/js/vendor/lunr.min.js' | absolute_url }}"></script>
  <script type="text/javascript" src="{{ '/assets/js/just-the-docs.js' | absolute_url }}"></script>
  {% endif %}

  {% if site.ga_tracking != nil %}
    <script async src="https://www.googletagmanager.com/gtag/js?id={{ site.ga_tracking }}"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', '{{ site.ga_tracking }}'{% unless site.ga_tracking_anonymize_ip == false %}, { 'anonymize_ip': true }{% endunless %});
    </script>
  {% endif %}

  {% if site.search_enabled != false %}
  <script type="text/javascript">
    {%- assign search_data = site.html_pages | where: 'search_exclude', nil | map: 'content' | join: ' ' -%}
    var searchData = JSON.parse('{{ search_data | jsonify }}');
  </script>
  {% endif %}

  <!-- Enhanced functionality scripts -->
  <script>
    // Smooth scroll for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        }
      });
    });

    // Add copy buttons to code blocks
    document.querySelectorAll('pre').forEach((block, index) => {
      const button = document.createElement('button');
      button.className = 'copy-code-button';
      button.textContent = 'Copy';
      button.addEventListener('click', () => {
        const code = block.querySelector('code');
        if (code) {
          navigator.clipboard.writeText(code.textContent).then(() => {
            button.textContent = 'Copied!';
            setTimeout(() => button.textContent = 'Copy', 2000);
          });
        }
      });
      block.style.position = 'relative';
      block.appendChild(button);
    });

    // Enhanced mobile navigation
    const navToggle = document.querySelector('.nav-toggle');
    const sideBar = document.querySelector('.side-bar');
    
    if (navToggle && sideBar) {
      navToggle.addEventListener('click', () => {
        sideBar.classList.toggle('nav-open');
      });
    }
  </script>
</body>
</html>